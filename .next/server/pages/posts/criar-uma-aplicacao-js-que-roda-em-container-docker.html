<!DOCTYPE html><html><head><link rel="preconnect" href="https://fonts.gstatic.com"/><link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300&amp;display=swap" rel="stylesheet"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/blog/_next/static/css/4961177f15aa2448de25.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/4961177f15aa2448de25.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/blog/_next/static/chunks/main-afd182600f1e0cf7511a.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/framework.e2fe4ae6b85b1c7a6eb1.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/f6078781a05fe1bcb0902d23dbbb2662c8d200b3.76b4e8f2b30a8a41e97c.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/pages/_app-bcdbe4268eb529158159.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/pages/posts/criar-uma-aplicacao-js-que-roda-em-container-docker-489bb2dd3c36b9005b8c.js" as="script"/></head><body><div id="__next"><div><header class="Navbar__Header-ihq9ct-0 dodOEq"><a href="/" class="Navbar__SiteName-ihq9ct-1 giIXgY">Blog do Daniel</a><a href="https://www.linkedin.com/in/daniel-fernandes-pereira/" class="Navbar__Link-ihq9ct-2 dXOQoD"> Linkdin </a></header><main class="_app__Main-sc-1i136x7-0 gChnDw"><h1>#1 - Criar uma aplicacao js que roda em container docker</h1><h2>Aplicação genérica que vamos gerar uma imagem</h2><pre class="language-js"><code class="language-js"><span class="token comment">/* salvar o arquivo ./app.js */</span>

<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">3000</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token method function property-access">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token method function property-access">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">&quot;Content-Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text/html&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token property-access">statusCode</span> <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;h1&gt;Hello World&lt;/h1&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token method function property-access">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token method function property-access">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Server listening on the port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2>Criar Dockerfile(Receita da aplicação)</h2><pre class="language-dockerfile"><code class="language-dockerfile"><span class="token comment"># salvar  ./Dockerfile\n</span>
<span class="token keyword">FROM</span> node<span class="token punctuation">:</span>slim

<span class="token keyword">WORKDIR</span> /usr/home

<span class="token keyword">COPY</span> app.js .

<span class="token keyword">EXPOSE</span> 3000

<span class="token keyword">CMD</span> <span class="token punctuation">[</span><span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;app.js&quot;</span><span class="token punctuation">]</span>

</code></pre><h2>Buildar/Construir a imagem docker</h2><pre class="language-dockerfile"><code class="language-dockerfile"><span class="token comment"># Na pasta aonde está o Dockerfile e app.js</span>
docker build <span class="token punctuation">-</span>t generic_app<span class="token punctuation">:</span>v1

</code></pre><h2>Executar aplicação constuída</h2><pre class="language-bash"><code class="language-bash">docker run --name app -p <span class="token number">3000</span>:3000 -it generic_app:v1
</code></pre><h2>Bom vc será capaz de ver nesse link</h2><p>http://localhost:3000/</p></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/posts/criar-uma-aplicacao-js-que-roda-em-container-docker","query":{},"buildId":"imevfHR3RQt-Mg6gY7Dub","assetPrefix":"/blog","nextExport":true,"autoExport":true,"isFallback":false}</script><script nomodule="" src="/blog/_next/static/chunks/polyfills-4f14e8c8ea1352d3ef0d.js"></script><script src="/blog/_next/static/chunks/main-afd182600f1e0cf7511a.js" async=""></script><script src="/blog/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/blog/_next/static/chunks/framework.e2fe4ae6b85b1c7a6eb1.js" async=""></script><script src="/blog/_next/static/chunks/f6078781a05fe1bcb0902d23dbbb2662c8d200b3.76b4e8f2b30a8a41e97c.js" async=""></script><script src="/blog/_next/static/chunks/pages/_app-bcdbe4268eb529158159.js" async=""></script><script src="/blog/_next/static/chunks/pages/posts/criar-uma-aplicacao-js-que-roda-em-container-docker-489bb2dd3c36b9005b8c.js" async=""></script><script src="/blog/_next/static/imevfHR3RQt-Mg6gY7Dub/_buildManifest.js" async=""></script><script src="/blog/_next/static/imevfHR3RQt-Mg6gY7Dub/_ssgManifest.js" async=""></script></body></html>